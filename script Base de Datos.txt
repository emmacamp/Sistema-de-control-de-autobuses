USE [master]
GO
/****** Object:  Database [SISTEMA_AUTOBUSES]    Script Date: 15/8/2021 11:33:15 p. m. ******/
CREATE DATABASE [SISTEMA_AUTOBUSES]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'SISTEMA_AUTOBUSES', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL15.SQLEXPRESS01\MSSQL\DATA\SISTEMA_AUTOBUSES.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'SISTEMA_AUTOBUSES_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL15.SQLEXPRESS01\MSSQL\DATA\SISTEMA_AUTOBUSES_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET COMPATIBILITY_LEVEL = 150
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [SISTEMA_AUTOBUSES].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET ARITHABORT OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET AUTO_CLOSE ON 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET  ENABLE_BROKER 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET RECOVERY SIMPLE 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET  MULTI_USER 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET DB_CHAINING OFF 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET QUERY_STORE = OFF
GO
USE [SISTEMA_AUTOBUSES]
GO
/****** Object:  Table [dbo].[ASIGNACIONES]    Script Date: 15/8/2021 11:33:15 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ASIGNACIONES](
	[ID_ASIGNACION] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE_CHOFER] [nvarchar](50) NULL,
	[AUTOBUS_ASIGNADO] [nvarchar](50) NULL,
	[RUTA_ASIGNADA] [nvarchar](50) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_ASIGNACION] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[AUTOBUSES]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[AUTOBUSES](
	[ID_AUTOBUS] [int] IDENTITY(1,1) NOT NULL,
	[MARCA] [nvarchar](50) NULL,
	[MODELO] [nvarchar](50) NULL,
	[PLACA] [nvarchar](50) NULL,
	[COLOR] [nvarchar](20) NULL,
	[AÑO] [int] NULL,
	[CONDICION] [nvarchar](20) NULL,
	[CAPACIDAD] [nvarchar](10) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_AUTOBUS] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CHOFERES]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CHOFERES](
	[ID_CHOFER] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRES] [nvarchar](50) NULL,
	[APELLIDOS] [nvarchar](50) NULL,
	[F_NACIMIENTO] [nvarchar](15) NULL,
	[CEDULA] [nvarchar](20) NULL,
	[EDAD] [int] NULL,
	[TELEFONO] [nvarchar](20) NULL,
	[SEXO] [nvarchar](10) NULL,
	[NACIONALIDAD] [nvarchar](20) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_CHOFER] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[RUTAS]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[RUTAS](
	[ID_RUTA] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [nvarchar](50) NULL,
	[SALIDA] [nvarchar](50) NULL,
	[FINAL] [nvarchar](50) NULL,
	[HORARIO] [nvarchar](20) NULL,
PRIMARY KEY CLUSTERED 
(
	[ID_RUTA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCAR_ASIGNACION]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCAR_ASIGNACION]
@BUSCAR NVARCHAR (20)
AS
SELECT*FROM ASIGNACIONES
WHERE NOMBRE_CHOFER LIKE @BUSCAR + '%'
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCAR_AUTOBUS]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCAR_AUTOBUS]
@BUSCAR NVARCHAR (20)
AS
SELECT*FROM AUTOBUSES
WHERE MARCA LIKE @BUSCAR + '%'
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCAR_CHOFER]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCAR_CHOFER]
@BUSCAR NVARCHAR (20)
AS
SELECT*FROM CHOFERES
WHERE NOMBRES LIKE @BUSCAR + '%'
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCAR_RUTA]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCAR_RUTA]
@BUSCAR NVARCHAR (20)
AS
SELECT*FROM RUTAS
WHERE NOMBRE LIKE @BUSCAR + '%'
GO
/****** Object:  StoredProcedure [dbo].[SP_EDITAR_ASIGNACION]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_EDITAR_ASIGNACION]
@ID_ASIGNACION INT,
@NOMBRE_CHOFER NVARCHAR (50),
@AUTOBUS_ASIGNADO NVARCHAR (50),
@RUTA_ASIGNADA NVARCHAR (50)
AS
UPDATE ASIGNACIONES SET NOMBRE_CHOFER = @NOMBRE_CHOFER, AUTOBUS_ASIGNADO = @AUTOBUS_ASIGNADO,
RUTA_ASIGNADA = RUTA_ASIGNADA
WHERE ID_ASIGNACION = @ID_ASIGNACION
GO
/****** Object:  StoredProcedure [dbo].[SP_EDITAR_AUTOBUS]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_EDITAR_AUTOBUS]
@ID_AUTOBUS INT,
@MARCA NVARCHAR (50),
@MODELO NVARCHAR (50),
@PLACA NVARCHAR (50),
@COLOR NVARCHAR (20),
@AÑO INT,
@CONDICION NVARCHAR (20),
@CAPACIDAD NVARCHAR (10)
AS
UPDATE AUTOBUSES SET MARCA = @MARCA, MODELO = @MODELO,
PLACA = @PLACA, COLOR = @COLOR, AÑO = @AÑO,
CONDICION = @CONDICION, CAPACIDAD = @CAPACIDAD
WHERE ID_AUTOBUS = @ID_AUTOBUS
GO
/****** Object:  StoredProcedure [dbo].[SP_EDITAR_CHOFER]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_EDITAR_CHOFER]
@ID_CHOFER INT,
@NOMBRES NVARCHAR (50),
@APELLIDOS NVARCHAR (50),
@F_NACIMIENTO NVARCHAR (15),
@CEDULA NVARCHAR (20),
@EDAD INT,
@TELEFONO NVARCHAR (20),
@SEXO NVARCHAR (10),
@NACIONALIDAD NVARCHAR (20)
AS
UPDATE CHOFERES SET NOMBRES = @NOMBRES, APELLIDOS = @APELLIDOS,
F_NACIMIENTO = @F_NACIMIENTO, CEDULA = @CEDULA, EDAD = @EDAD,
TELEFONO = @TELEFONO, SEXO = @SEXO, NACIONALIDAD = @NACIONALIDAD
WHERE ID_CHOFER = @ID_CHOFER
GO
/****** Object:  StoredProcedure [dbo].[SP_EDITAR_RUTA]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_EDITAR_RUTA]
@ID_RUTA INT,
@NOMBRE NVARCHAR (50),
@SALIDA NVARCHAR (50),
@FINAL NVARCHAR (50),
@HORARIO NVARCHAR (20)
AS
UPDATE RUTAS SET NOMBRE = @NOMBRE, SALIDA = @SALIDA,
FINAL = @FINAL, HORARIO = @HORARIO
WHERE ID_RUTA = @ID_RUTA
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINAR_ASIGNACION]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINAR_ASIGNACION]
@ID_ASIGNACION INT
AS
DELETE ASIGNACIONES
WHERE ID_ASIGNACION = @ID_ASIGNACION
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINAR_AUTOBUS]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINAR_AUTOBUS]
@ID_AUTOBUS INT
AS
DELETE AUTOBUSES
WHERE ID_AUTOBUS = @ID_AUTOBUS
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINAR_CHOFER]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINAR_CHOFER]
@ID_CHOFER INT
AS
DELETE CHOFERES
WHERE ID_CHOFER = @ID_CHOFER
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINAR_RUTA]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINAR_RUTA]
@ID_RUTA INT
AS
DELETE RUTAS
WHERE ID_RUTA = @ID_RUTA
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTAR_ASIGNACION]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_INSERTAR_ASIGNACION]
@NOMBRE_CHOFER NVARCHAR (50),
@AUTOBUS_ASIGNADO NVARCHAR (50),
@RUTA_ASIGNADA NVARCHAR (50)
AS
INSERT INTO ASIGNACIONES VALUES (@NOMBRE_CHOFER, @AUTOBUS_ASIGNADO,
@RUTA_ASIGNADA)
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTAR_AUTOBUS]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_INSERTAR_AUTOBUS]
@MARCA NVARCHAR (50),
@MODELO NVARCHAR (50),
@PLACA NVARCHAR (50),
@COLOR NVARCHAR (20),
@AÑO INT,
@CONDICION NVARCHAR (20),
@CAPACIDAD NVARCHAR (10)
AS
INSERT INTO AUTOBUSES VALUES (@MARCA, @MODELO,
@PLACA, @COLOR, @AÑO, @CONDICION, @CAPACIDAD)
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTAR_CHOFER]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_INSERTAR_CHOFER]
@NOMBRES NVARCHAR (50),
@APELLIDOS NVARCHAR (50),
@F_NACIMIENTO NVARCHAR (15),
@CEDULA NVARCHAR (20),
@EDAD INT,
@TELEFONO NVARCHAR (20),
@SEXO NVARCHAR (10),
@NACIONALIDAD NVARCHAR (20)
AS
INSERT INTO CHOFERES VALUES (@NOMBRES, @APELLIDOS,
@F_NACIMIENTO, @CEDULA, @EDAD, @TELEFONO, @SEXO,
@NACIONALIDAD)
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTAR_RUTA]    Script Date: 15/8/2021 11:33:16 p. m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_INSERTAR_RUTA]
@NOMBRE NVARCHAR (50),
@SALIDA NVARCHAR (50),
@FINAL NVARCHAR (50),
@HORARIO NVARCHAR (20)
AS
INSERT INTO RUTAS VALUES (@NOMBRE, @SALIDA,
@FINAL, @HORARIO)
GO
USE [master]
GO
ALTER DATABASE [SISTEMA_AUTOBUSES] SET  READ_WRITE 
GO
